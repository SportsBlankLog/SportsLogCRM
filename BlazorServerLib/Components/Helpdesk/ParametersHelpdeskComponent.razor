@using BlazorWebLib.Components.Telegram
@using BlazorWebLib.Components.Users
@using MudBlazor

@inherits BlazorBusyComponentBaseModel
@attribute [Authorize(Roles = $"{GlobalStaticConstants.Roles.Admin},{GlobalStaticConstants.Roles.HelpDeskTelegramBotManager},{GlobalStaticConstants.Roles.HelpDeskTelegramBotUnit}")]
@rendermode @(new InteractiveServerRenderMode(prerender: false))

<MudTabs Style="overflow: overlay;" Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
    <MudTabPanel Text="Рубрики">
        <RubricsParametersComponent />
    </MudTabPanel>
    <MudTabPanel Text="HelpDesk">
        <ChatSelectComponent Title="Переадресация Telegram сообщений (глобально)"
                             Subtitle="Для клиентов, на которых ни кто не подписан"
                             KeyStorage="GlobalStaticConstants.CloudStorageMetadata.HelpdeskNotificationTelegramGlobalForIncomingMessage" />

        <ChatSelectComponent Title="Новые заявки"
                             Subtitle="Уведомления TelegramBot при создании новых заявок"
                             KeyStorage="GlobalStaticConstants.CloudStorageMetadata.HelpdeskNotificationTelegramForCreateIssue" />
    </MudTabPanel>
    <MudTabPanel Text="Telegram">
        <TelegramConfigComponent />
    </MudTabPanel>
    <MudTabPanel ToolTip="Права пользователей" Text="Доступ">
        <UsersTableComponent HideClaimsColumn="true" HideRolesColumn="true" RolesManageKit="@GlobalStaticConstants.Roles.AllHelpDeskRoles" />
    </MudTabPanel>
</MudTabs>