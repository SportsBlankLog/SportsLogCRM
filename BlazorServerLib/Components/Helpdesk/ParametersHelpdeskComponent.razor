@using BlazorWebLib.Components.Telegram
@using BlazorWebLib.Components.Users
@using MudBlazor

@inherits BlazorBusyComponentBaseModel
@attribute [Authorize(Roles = $"{GlobalStaticConstants.Roles.Admin},{GlobalStaticConstants.Roles.HelpDeskTelegramBotManager},{GlobalStaticConstants.Roles.HelpDeskTelegramBotUnit}")]
@rendermode @(new InteractiveServerRenderMode(prerender: false))

<MudTabs Style="overflow: overlay;" Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
    <MudTabPanel Text="Рубрики">
        <RubricsParametersComponent />
    </MudTabPanel>
    <MudTabPanel ToolTip="Регионы, районы, города" Text="Адреса" Icon="@Icons.Material.Filled.LocationCity">
        <MudPaper Class="ma-2" Elevation="3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Регионы, районы, города (населённые пункты)</h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary">Улицу, дом и далее заполняется в конце отдельно</h6>
                    <RubricsManageComponent ContextName="@GlobalStaticConstants.Routes.ADDRESS_CONTROLLER_NAME" />
                </div>
            </div>
        </MudPaper>
    </MudTabPanel>
    <MudTabPanel Text="HelpDesk">
        <ChatSelectComponent Title="Переадресация Telegram сообщений (глобально)"
                             Subtitle="Для клиентов, на которых ни кто не подписан"
                             KeyStorage="GlobalStaticConstants.CloudStorageMetadata.HelpdeskNotificationTelegramGlobalForIncomingMessage" />

        <ChatSelectComponent Title="Новые заявки"
                             Subtitle="Уведомления TelegramBot при создании новых заявок"
                             KeyStorage="GlobalStaticConstants.CloudStorageMetadata.HelpdeskNotificationTelegramForCreateIssue" />
    </MudTabPanel>
    <MudTabPanel Text="Telegram">
        <TelegramConfigComponent />
    </MudTabPanel>
    <MudTabPanel ToolTip="Права пользователей" Text="Доступ">
        <UsersTableComponent HideClaimsColumn="true" HideRolesColumn="true" RolesManageKit="@GlobalStaticConstants.Roles.AllHelpDeskRoles.Union([GlobalStaticConstants.Roles.CommerceManager, GlobalStaticConstants.Roles.CommerceClient])" />
    </MudTabPanel>
    <MudTabPanel ToolTip="Другие параметры" Text="Разное">
        <OtherParametersHelpdeskComponent />
    </MudTabPanel>
</MudTabs>