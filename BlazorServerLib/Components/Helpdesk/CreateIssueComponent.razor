@inherits BlazorBusyComponentBaseModel

@using MudBlazor

@if (!IsEditMode)
{
    <MudButton OnClick="ToggleMode" Variant="Variant.Filled" Color="Color.Primary" FullWidth="true">Создать новое обращение</MudButton>
}
else
{
    <MudCard>
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h6">Создание нового диалога</MudText>
            </CardHeaderContent>
            <CardHeaderActions>
                <MudIconButton OnClick="ToggleMode" Icon="@Icons.Material.Filled.Close" Color="Color.Default" />
            </CardHeaderActions>
        </MudCardHeader>
        <MudCardContent>
            <MudStack>
                <RubricSelectorComponent />
                <InputRichTextComponent @bind-Value="Description" ReadOnly="IsBusyProgress" />
            </MudStack>
        </MudCardContent>
        <MudCardActions>
            <MudButton Variant="Variant.Text" Color="Color.Success">Создать</MudButton>
            <MudButton OnClick="ToggleMode" Variant="Variant.Text" Color="Color.Primary">Отмена</MudButton>
        </MudCardActions>
    </MudCard>
}

@code {
    [CascadingParameter, EditorRequired]
    public required Action<HelpdeskJournalModesEnum> ReloadIssueJournal { get; set; }

    string? Description;

    bool IsEditMode { get; set; } = false;

    void ToggleMode()
    {
        IsEditMode = !IsEditMode;
        if (!IsEditMode)
            return;


    }
}