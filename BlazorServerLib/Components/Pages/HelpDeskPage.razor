@page "/help-desk/main-page"
@rendermode @(new InteractiveServerRenderMode(prerender: false))
@using BlazorWebLib.Components.Helpdesk
@using MudBlazor

@attribute [Authorize]

<h4>Help desk</h4>
<MudTabs Outlined="true">
    <MudTabPanel ToolTip="Ваши личные обращения в службу техподдержки" Text="Мои обращения" Icon="@Icons.Material.Filled.AllInbox">
        <MyHelpdeskComponent />
    </MudTabPanel>
    <AuthorizeView Roles="@($"{string.Join(",",GlobalStaticConstants.Roles.AllHelpDeskRoles)},{GlobalStaticConstants.Roles.Admin}")">
        <Authorized>
            <MudTabPanel ToolTip="Обслуживание входящих обращений" Text="Обращения клиентов" Icon="@Icons.Material.Filled.BugReport">
                <MudPaper Class="ma-2" Elevation="3">
                    <HelpdeskJobComponent />
                </MudPaper>
            </MudTabPanel>
        </Authorized>
    </AuthorizeView>
    <AuthorizeView Roles="@($"{GlobalStaticConstants.Roles.HelpDeskTelegramBotManager},{GlobalStaticConstants.Roles.Admin}")">
        <Authorized>
            <MudTabPanel ToolTip="Управление настройками" Text="Рубрики" Icon="@Icons.Material.Filled.AccountTree">
                <MudPaper Class="ma-2" Elevation="3">
                    <RubricsManageComponent />
                </MudPaper>
            </MudTabPanel>
            <MudTabPanel ToolTip="Управление настройками" Text="Конфигурация" Icon="@Icons.Material.Filled.Build">
                <MudPaper Class="ma-2" Elevation="3">
                    <ParametersComponent />
                </MudPaper>
            </MudTabPanel>
        </Authorized>
    </AuthorizeView>
</MudTabs>