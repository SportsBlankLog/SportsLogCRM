@using BlazorLib
@using SharedLib;
@using System.Net;
@using System.Security;

@inherits BlazorBusyComponentBaseModel

<h3>TestComponent</h3>
@if (IsBusyProgress)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-3" />
}
<MudStack Row="true">
    <MudSelect T="PortfolioStockSharpModel" @bind-Value="selectedPortfolio" Label="Портфель" Variant="Variant.Outlined">
        @if (myPortfolios is not null && myPortfolios.Count() != 0)
        {
            @foreach (PortfolioStockSharpModel p in myPortfolios.ToArray())
            {
                <MudSelectItem T="PortfolioStockSharpModel" Value="p">
                    @p
                </MudSelectItem>
            }
        }
    </MudSelect>

    <MudSelect @bind-Value="selectedBoard" Label="Площадка" Variant="Variant.Outlined">
        @if (myBoards is not null && myBoards.Count() != 0)
        {
            @foreach (BoardStockSharpModel b in myBoards)
            {
                <MudSelectItem Value="b">
                    @b
                </MudSelectItem>
            }
        }
    </MudSelect>
    @* 
        <MudSelect T="EntryAltModel" @bind-Value="selectedTool" Label="Инструмент" Variant="Variant.Outlined">
            @if (selectedBoard is not null && !string.IsNullOrWhiteSpace(selectedBoard))
            {
                @foreach (EntryAltModel s in mapSecurities[selectedBoard].ToArray())
                {
                    <MudSelectItem T="EntryAltModel" Value="s">
                        @s.Name [@s.Id]
                    </MudSelectItem>
                }
            }
            else
            {
                selectedTool = null;
            }
        </MudSelect>
        @if (!string.IsNullOrWhiteSpace(selectedTool?.Id))
        {
            <MudNumericField @bind-Value="DecimalValue" Label="Цена" Variant="Variant.Outlined" Immediate />
            <MudFab Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Add" OnClick="NewOrder" Disabled="@(DecimalValue <= 0 || selectedPortfolio is null)" />
        }
    *@
</MudStack> 