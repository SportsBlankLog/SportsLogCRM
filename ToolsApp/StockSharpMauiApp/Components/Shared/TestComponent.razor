@using BlazorLib
@using SharedLib;
@using System.Net;
@using System.Security;

@inherits BlazorBusyComponentBaseModel

<h3>TestComponent</h3>
@if (IsBusyProgress)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-3" />
}
<MudStack Row="true">
    <MudSelect T="PortfolioStockSharpModel" @bind-Value="SelectedPortfolio" Label="Портфель" Variant="Variant.Outlined">
        @if (myPortfolios is not null && myPortfolios.Count() != 0)
        {
            @foreach (PortfolioStockSharpModel p in myPortfolios.ToArray())
            {
                <MudSelectItem T="PortfolioStockSharpModel" Value="p">
                    @p
                </MudSelectItem>
            }
        }
    </MudSelect>

    <MudSelect @bind-Value="SelectedBoard" Label="Площадка" Variant="Variant.Outlined">
        @if (myBoards is not null && myBoards.Count() != 0)
        {
            @foreach (BoardStockSharpModel b in myBoards)
            {
                <MudSelectItem Value="b">
                    @b
                </MudSelectItem>
            }
        }
    </MudSelect>

    @* <MudSelect T="InstrumentTradeStockSharpModel" @bind-Value="SelectedInstrument" Label="Инструмент" Variant="Variant.Outlined">
        @if (SelectedBoard is not null && myInstruments is not null)
        {
            @foreach (InstrumentTradeStockSharpModel s in myInstruments.Where(x => x.Board is not null && x.Board == SelectedBoard))
            {
                <MudSelectItem T="InstrumentTradeStockSharpModel" Value="s">
                    @s
                </MudSelectItem>
            }
        }
        else
        {
            SelectedInstrument = null;
        }
    </MudSelect> *@
    @* @if (!string.IsNullOrWhiteSpace(SelectedInstrument?.Code))
    {
        <MudNumericField @bind-Value="DecimalValue" Label="Цена" Variant="Variant.Outlined" Immediate />
        <MudFab Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Add" OnClick="NewOrder" Disabled="@(DecimalValue <= 0 || SelectedPortfolio is null)" />
    } *@
</MudStack> 